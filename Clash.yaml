proxy-providers:
  ğŸ›« ACA:
    type: http
    ## ä¿®æ”¹ä¸ºä½ çš„ Clash è®¢é˜…é“¾æ¥
    url: ""
    path: ./proxies/aca.yaml
    interval: 86400
    health-check:
      enable: true
      url: https://www.gstatic.com/generate_204
      interval: 600
  ğŸ›« West:
    type: http
    ## ä¿®æ”¹ä¸ºä½ çš„ Clash è®¢é˜…é“¾æ¥
    url: ""
    path: ./proxies/west.yaml
    interval: 86400
    health-check:
      enable: true
      url: https://www.gstatic.com/generate_204
      interval: 600
  ğŸ›« Hutao:
    type: http
    ## ä¿®æ”¹ä¸ºä½ çš„ Clash è®¢é˜…é“¾æ¥
    url: ""
    path: ./proxies/hutao.yaml
    interval: 86400
    health-check:
      enable: true
      url: https://www.gstatic.com/generate_204
      interval: 600

proxy-groups:
  - {name: ğŸš© PROXY, type: select, proxies: [â™»ï¸ è‡ªåŠ¨é€‰æ‹©, âœ… ACA, ğŸ‘ West, ğŸ‘ Hutao,ğŸš€ æ‰‹åŠ¨åˆ‡æ¢]}
  - {name: ğŸŒ å›½å¤–åª’ä½“, type: select, proxies: [â™»ï¸ è‡ªåŠ¨é€‰æ‹©, âœ… ACA, ğŸ‘ West, ğŸ‘ Hutao,ğŸš€ æ‰‹åŠ¨åˆ‡æ¢]}
  - {name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©, type: url-test, tolerance: 50, include-all-providers: true, filter: "Japan|Singapore|Hong Kong|æ—¥æœ¬|æ–°åŠ å¡|é¦™æ¸¯"}
  - {name: ğŸš€ æ‰‹åŠ¨åˆ‡æ¢, type: select, include-all-providers: true, filter: "Japan|Singapore|Hong Kong|æ—¥æœ¬|æ–°åŠ å¡|é¦™æ¸¯"}
  - {name: ğŸŸ æ¼ç½‘ä¹‹é±¼, type: select, proxies: [ğŸš© PROXY, DIRECT]}
  - {name: â˜ï¸ onedrive, type: select, proxies: [DIRECT,ğŸš© PROXY]}
  - {name: ğŸªŸ å¾®è½¯, type: select, proxies: [DIRECT,ğŸš© PROXY]}
  - {name: ğŸ“ ç›´è¿, type: select, proxies: [DIRECT,ğŸš© PROXY]}
  - {name: ğŸ¤– äººå·¥æ™ºèƒ½, type: url-test, tolerance: 50, include-all-providers: true, filter: "Japan|Singapore|æ—¥æœ¬|æ–°åŠ å¡"}
  - {name: âœ… ACA, type: url-test, tolerance: 50, use: [ğŸ›« ACA], filter: "Japan|Singapore|Hong Kong"}
  - {name: ğŸ‘ West, type: url-test, tolerance: 50, use: [ğŸ›« West], filter: "Japan|Singapore|Hong Kong"}
  - {name: ğŸ‘ Hutao, type: url-test, tolerance: 50, use: [ğŸ›« Hutao], filter: "æ—¥æœ¬|æ–°åŠ å¡|é¦™æ¸¯"}
rule-providers:
  emby:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/zhf883680/ClashRules@main/rule-providers/emby.yaml"
    path: ./ruleset/emby.yaml
    interval: 86400
  embyvip:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/zhf883680/ClashRules@main/rule-providers/embyvip.yaml"
    path: ./ruleset/embyvip.yaml
    interval: 86400
  selfuse:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/zhf883680/ClashRules@main/rule-providers/selfuse.yaml"
    path: ./ruleset/selfuse.yaml
    interval: 86400
rules:
  - AND,(AND,(DST-PORT,443),(NETWORK,UDP)),(NOT,((GEOSITE,cn))),REJECT
  - GEOIP,lan,DIRECT,no-resolve
  - GEOSITE,category-ads-all,REJECT
  - GEOSITE,private,DIRECT
  - GEOSITE,icloud,DIRECT
  - GEOSITE,apple-cn,DIRECT
  - GEOSITE,google,ğŸš© PROXY
  - GEOSITE,github,ğŸš© PROXY
  - GEOSITE,onedrive,â˜ï¸ onedrive
  - GEOSITE,microsoft,ğŸªŸ å¾®è½¯
  - GEOSITE,category-ai-chat-!cn,ğŸ¤– äººå·¥æ™ºèƒ½
  - GEOSITE,youtube,ğŸŒ å›½å¤–åª’ä½“
  - RULE-SET,selfuse,ğŸš© PROXY
  - RULE-SET,emby,ğŸŒ å›½å¤–åª’ä½“
  - RULE-SET,embyvip,DIRECT
  - GEOSITE,CN,ğŸ“ ç›´è¿
  - GEOSITE,steam@cn,DIRECT
  - GEOSITE,category-games@cn,DIRECT
  - GEOSITE,geolocation-!cn,ğŸš© PROXY

  - GEOIP,google,ğŸš© PROXY
  - GEOIP,telegram,ğŸš© PROXY
  - GEOIP,CN,ğŸ“ ç›´è¿
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼


mode: rule
# ipv6 æ”¯æŒ
ipv6: true
keep-alive-idle: 600
keep-alive-interval: 15
log-level: info
# å…è®¸å±€åŸŸç½‘è¿æ¥
allow-lan: true
# socks5/http ç«¯å£
mixed-port: 7890
# Meta å†…æ ¸ç‰¹æ€§ https://wiki.metacubex.one/config/general
# ç»Ÿä¸€å»¶è¿Ÿ
# æ›´æ¢å»¶è¿Ÿè®¡ç®—æ–¹å¼,å»é™¤æ¡æ‰‹ç­‰é¢å¤–å»¶è¿Ÿ
unified-delay: true
# TCP å¹¶å‘
# åŒæ—¶å¯¹æ‰€æœ‰ipè¿›è¡Œè¿æ¥ï¼Œè¿”å›å»¶è¿Ÿæœ€ä½çš„åœ°å€
tcp-concurrent: true

geodata-mode: true
geodata-loader: standard
geox-url:
  geosite: https://mirror.ghproxy.com/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat
  mmdb: https://mirror.ghproxy.com/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip-lite.metadb
  geoip: https://mirror.ghproxy.com/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip-lite.dat
  asn: https://mirror.ghproxy.com/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/GeoLite2-ASN.mmdb
geo-auto-update: true
geo-update-interval: 24
find-process-mode: off
# åŸŸåå—…æ¢
sniffer:
  enable: true
  sniff:
    TLS:
      ports: [443, 8443]
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true

# tun æ¨¡å¼
tun:
  enable: false  # enable 'true'
  stack: system  # or 'gvisor'
  dns-hijack:
    - "any:53"
    - "tcp://any:53"
  auto-route: true
  auto-detect-interface: true
# ç¼“å­˜
profile:
  store-selected: true
  store-fake-ip: true
# dns è®¾ç½®
# å·²é…ç½® ipv6
dns:
  enable: true
  listen: :1053
  prefer-h3: false
  ipv6: true
  # è·¯ç”±å™¨ä¸ªäººå»ºè®®ä½¿ç”¨ redir-host ä»¥æœ€ä½³å…¼å®¹æ€§
  # å…¶ä»–è®¾å¤‡å¯ä»¥ä½¿ç”¨ fake-ip
  enhanced-mode: redir-host
  fake-ip-range: 198.18.0.1/16
  use-system-hosts: false
  use-hosts: true
  fake-ip-filter:
    - '*'
    - '+.lan'
    - '+.local'
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29
  proxy-server-nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query
  direct-nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query
  nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query
  nameserver-policy:
    geosite:cn,private:
      - https://dns.alidns.com/dns-query
      - https://doh.pub/dns-query
    geosite:geolocation-!cn:
      - https://dns.cloudflare.com/dns-query
      - https://dns.google/dns-query
